fill = NA,
color = "red",
linewidth = 1) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA3_NAME21 == "Maribyrnong"),
fill = NA,
linewidth = 0.1) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"),
fill = NA,
color = "red",
linewidth = 1)+
geom_sf(data = GMelb_Shapes$SA1 |> filter(SA2_NAME21 == "Footscray"),
fill = NA,
linewidth = 0.001) +
coord_sf(xlim = c(144.8, 144.96) , ylim = c(-37.75, -37.88))
#| echo: false
#| warning: false
#| label: fig-GMelbSA2SA3SA4
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = 0.5) +
geom_sf(data = GMelb_Shapes$SA3, fill = NA, linewidth = 0.3) +
#| echo: false
#| warning: false
#| label: fig-GMelbSA2SA3SA4
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = 0.5) +
geom_sf(data = GMelb_Shapes$SA3, fill = NA, linewidth = 0.3) +
```
#| echo: false
#| warning: false
#| label: fig-GMelbSA2SA3SA4
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = 0.5) +
geom_sf(data = GMelb_Shapes$SA3, fill = NA, linewidth = 0.3)
glue
glue()
#| echo: false
#| warning: false
library(glue)
Gmelb_shapes <- map(
map(
c("SA2", "SA3", "SA4"),
\(x) glue("../../data/ASGS_GDA2020/{x}_2021_AUST_SHP_GDA2020/{x}_2021_AUST_GDA2020.shp")),
read_csv) |>
`names<-`(c("SA2", "SA3", "SA4"))
Gmelb_shapes
Gmelb_shapes <- map(
map(
c("MB", "SA1", "SA2", "SA3", "SA4"),
\(x) glue("../../data/ASGS_GDA2020/{x}_2021_AUST_SHP_GDA2020/{x}_2021_AUST_GDA2020.shp")),
read_csv) |>
`names<-`(c("SA2", "SA3", "SA4"))
#| echo: false
#| warning: false
library(glue)
Shapes <- map(
map(
c("MB", "SA1", "SA2", "SA3", "SA4"),
\(x) glue("../../data/ASGS_GDA2020/{x}_2021_AUST_SHP_GDA2020/{x}_2021_AUST_GDA2020.shp")),
read_csv) |>
`names<-`(c("SA2", "SA3", "SA4"))
GMelb_Shapes <- Shapes |>
map(\(x) filter(x, GCC_NAME21 == "Greater Melbourne"))
levels <- c("MB", "SA1", "SA2", "SA3", "SA4")
Shapes
Shapes <- map(
map(
c("MB", "SA1", "SA2", "SA3", "SA4"),
\(x) glue("../../data/ASGS_GDA2020/{x}_2021_AUST_SHP_GDA2020/{x}_2021_AUST_GDA2020.shp")),
read_sf) |>
`names<-`(levels)
levels <- list("MB", "SA1", "SA2", "SA3", "SA4")
Shapes <- map(
map(
levels,
\(x) glue("../../data/ASGS_GDA2020/{x}_2021_AUST_SHP_GDA2020/{x}_2021_AUST_GDA2020.shp")),
read_sf)
levels
levels <- list(MB = "MB", SA1 = "SA1", SA2 = "SA2", SA3 = "SA3", SA4 = "SA4")
Shapes <- map(
map(
levels,
\(x) glue("../../data/ASGS_GDA2020/{x}_2021_AUST_SHP_GDA2020/{x}_2021_AUST_GDA2020.shp")),
read_sf)
#script to generate population summaries from mesh blocks data
library(tidyverse)
library(readr)
read_excel("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx")
library(readxl)
read_excel("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx")
MB_data <- read_excel("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx")
MB_data
View(MB_data)
MB_data <- excel_sheets("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx", )
MB_data <- excel_sheets("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx" )
MB_data <- excel_sheets("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx" ) |>
map(\(x) readexcel("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx", x))
MB_data <- excel_sheets("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx" ) |>
map(\(x) read_excel("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx", x))
MB_data <- excel_sheets("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx") |>
select()
MB_data |> pluck(1:4)
MB_data |> pluck(1)
MB_data |> pluck(2)
MB_data |> flatten()
test <- MB_data |> flatten()
View(test)
test <- MB_data |> tibble()
test
test <- MB_data |> tibble() |>
unnest()
test
test <- MB_data |> as_tibble()
test <- MB_data |> as_tibble(.name_repair = "minimal")
test <- MB_data |> unnest()
test <- MB_data |> tibble() |> unnest()
test
View(test)
test <- MB_data |> tibble()
test
test <- MB_data |>
tibble() |>
head(-1)
test
test <- MB_data |>
tibble() |>
head(-1) |>
tail(-1)
test
unnest()
test <- MB_data |>
tibble() |>
head(-1) |>
tail(-1) |>
unnest()
test
MB_data <- excel_sheets("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx") |>
map(\(x) read_excel("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx", x)) |>
tibble() |>
head(-1) |>
tail(-1) |>
unnest()
MB_data <- excel_sheets("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx") |>
map(\(x) read_excel("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx", x))
MB_data|>
tibble() |>
head(-1) |>
tail(-1) |>
unnest()
MB_data|>
tibble() |>
head(-1) |>
tail(-1)
MB_data|>
tibble() |>
head(-1) |>
tail(-1) |>
unnest(coils = everything())
MB_data|>
tibble() |>
head(-1) |>
tail(-1) |>
unnest(cols = everything())
test <- MB_data|>
tibble() |>
head(-1) |>
tail(-1) |>
map(tail(-5))
test <- MB_data|>
tibble() |>
head(-1) |>
tail(-1) |>
map(\(x) tail(-5))
test
MB_data|>
tibble() |>
head(-1) |>
tail(-1)
test <- MB_data|>
tibble() |>
head(-1) |>
tail(-1) |>
mutate(\(x) tail(-5))
MB_data|>
tibble() |>
head(-1) |>
tail(-1)
test <- MB_data|>
tibble() |>
head(-1) |>
tail(-1) |>
mutate(\(MB_data) tail(-5))
test <- MB_data|>
tibble() |>
head(-1) |>
tail(-1) |>
mutate(test = tail(MB_data,-5))
MB_data|>
tibble() |>
head(-1) |>
tail(-1)
MB_data
test <- MB_data|>
`[`2:12
test <- MB_data|>
`[`(2:12)
test <- MB_data|>
`[`(c(1,2))
test <- MB_data|>
.[2:5]
test <- MB_data|>
.[2:5]
test <- MB_data %>%
.[2:5]
test
test <- MB_data %>%
.[2:12]
test <- MB_data %>%
.[2:13]
test
test <- MB_data %>%
.[2:13] %>%
map(\(x) tail(x, -5))
test
MB_data <- excel_sheets("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx") |>
map(\(x) read_excel("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx", x,skip = 5))
MB_data
excel_sheets("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx")
map(\(x) read_excel("../../data/ASGS_GDA2020/Mesh Block Counts, 2021.xlsx", x,skip = 5)) %>% tibble()
test <- MB_data %>%
.[2:13] %>%
map(\(x) tibble(x))
test <- MB_data %>%
.[2:13] %>%
map(tibble())
test <- MB_data %>%
.[2:13]
test
test <- MB_data %>%
.[2:13] %>%
as_tibble()
test <- MB_data %>%
.[2:13] %>%
as_tibble(.name_repair = "minimal")
test <- MB_data %>%
.[2:13] %>%
flatten()
test
test <- MB_data %>%
.[2:13] %>%
unnest()
test <- MB_data %>%
.[2:13] %>%
tibble()
MB_data %>%
.[2:13] %>%
tibble()
test <- MB_data %>%
.[2:13] %>%
tibble() %>%
unnest()
test
MB_data <- MB_data[2:13] %>%
tibble() %>%
unnest()
Hierarchy <- read_excel("../../data/ASGS_GDA2020/MB_2021_AUST.xlsx")
Hierarchy
test <- full_join(MB_data,Hierarchy, by = "MB_CODE_2021")
test
View(test)
MB_data <- full_join(MB_data,Hierarchy, by = "MB_CODE_2021")
levels = list(SA1 = "SA1", SA2 = "SA2", SA3 = "SA3", SA4 = "SA4")
terst <- map(levels,
\(x) MB_data %>%
group_by(glue({x}_CODE21)) %>%
terst <- map(levels,
\(x) {MB_data %>%
group_by(glue({x}_CODE21)) %>%
terst <- map(levels,
\(x) {MB_data %>%
group_by(glue({x}_CODE21)) %>%
Code = get(glue("{x}_CODE21)),
terst <- map(levels,
\(x) {MB_data %>%
group_by(glue("{x}_CODE21")) %>%
summarise(
Name = get(glue("{x}_NAME21")),
Code = get(glue("{x}_CODE21")),
Popn = sum(Person))}
)
terst <- map(levels,
\(x) {MB_data %>%
group_by(glue("{x}_CODE21")) %>%
summarise(
Code = get(glue("{x}_CODE21")),
Popn = sum(Person))}
)
terst <- map(levels,
\(x) {MB_data %>%
group_by(glue("{x}_CODE_2021")) %>%
summarise(
Code = get(glue("{x}_CODE_2021")),
Popn = sum(Person))}
)
terst
terst <- map(levels,
\(x) {MB_data %>%
group_by(glue("{x}_CODE_2021")) %>%
summarise(
Popn = sum(Person))}
)
terst
MB_data %>%
group_by(SA1_CODE_2021) %>%
summarise(
Code = unique(SA1_CODE_2021),
Popn = sum(Person)
)
MB_data %>%
group_by(SA1_CODE_2021) %>%
summarise(
Popn = sum(Person)
)
MB_data %>%
group_by(SA1_CODE_2021) %>%
summarise(
Popn = sum(Person)
) %>%
write_csv("../../../data/SA_Popns_AUS.csv")
MB_data %>%
group_by(SA1_CODE_2021) %>%
summarise(
Popn = sum(Person)
) %>%
write_csv("../../data/SA1_Popns_AUS.csv")
MB_data %>%
group_by(SA1_CODE_2021) %>%
summarise(
Names = SA2_NAME_2021,
Popn = sum(Person)
)
MB_data %>%
group_by(SA1_CODE_2021) %>%
summarise(
Names = unique(SA2_NAME_2021),
Popn = sum(Person)
)
MB_data %>%
group_by(SA2_CODE_2021) %>%
summarise(
Names = SA2_NAME_2021,
Popn = sum(Person)
)
MB_data %>%
group_by(SA3_CODE_2021) %>%
summarise(
Names = (SA3_NAME_2021),
Popn = sum(Person)
) %>%
write_csv("../../data/SA3_Popns_AUS.csv")
MB_data %>%
group_by(SA3_CODE_2021) %>%
summarise(
Names = uniqe(SA3_NAME_2021),
Popn = sum(Person)
) %>%
write_csv("../../data/SA3_Popns_AUS.csv")
MB_data %>%
group_by(SA3_CODE_2021) %>%
summarise(
Names = unique(SA3_NAME_2021),
Popn = sum(Person)
) %>%
write_csv("../../data/SA3_Popns_AUS.csv")
MB_data %>%
group_by(SA3_CODE_2021) %>%
summarise(
Names = unique(SA3_NAME_2021),
Popn = sum(Person)
)
MB_data %>%
group_by(SA4_CODE_2021) %>%
summarise(
Names = unique(SA4_NAME_2021),
Popn = sum(Person)
) %>%
write_csv("../../data/SA3_Popns_AUS.csv")
MB_data %>%
group_by(SA4_CODE_2021) %>%
summarise(
Names = unique(SA4_NAME_2021),
Popn = sum(Person)
) %>%
write_csv("../../data/SA4_Popns_AUS.csv")
MB_data %>%
group_by(GCCSA_CODE_2021) %>%
summarise(
Names = unique(GCCSA_NAME_2021),
Popn = sum(Person)
) %>%
write_csv("../../data/GCCSA_Popns_AUS.csv")
pnorm(q = 75)
pnorm(q = .75)
pnorm(q = 50)
pnorm(q = .50)
dnorm(0.75)
dnorm(0.25)
qnorm(p = 0.75)
GMelb_Shapes <- Shapes |>
map(\(x) filter(x, GCC_NAME21 == "Greater Melbourne"))
GMelb_Shapes
ggplot() +
geom_sf(data = GMelb_Shapes$SA4,
aes(fill = SA4_CODE21),
alpha = 0.5,
linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA4 |> filter(SA4_NAME21 == "Melbourne - West"),
fill = NA,
color = "red",
alpha = 0.5,
linewidth = 1)+
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA4_NAME21 == "Melbourne - West"),
fill = NA,
linewidth = 0.1) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"),
fill = NA,
color = "red",
alpha = 0.5,
linewidth = 1) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA3_NAME21 == "Maribyrnong"),
fill = NA,
linewidth = 0.1) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"),
fill = NA,
color = "red",
linewidth = 1) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA3_NAME21 == "Maribyrnong"),
fill = NA,
linewidth = 0.1) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"),
fill = NA,
color = "red",
linewidth = 1)+
geom_sf(data = GMelb_Shapes$SA1 |> filter(SA2_NAME21 == "Footscray"),
fill = NA,
linewidth = 0.001) +
geom_sf(data = GMelb_Shapes$MB |> filter(SA1_CODE21 == "21303134811"),
fill = NA,
linewidth = 0.001)
GMelb_Shapes$SA3 |> filter(SA4_NAME21 == "Melbourne - West")
GMelb_Shapes$SA2 |> filter(SA3_NAME21 == "Maribyrnong")
GMelb_Shapes$SA3 |> filter(SA4_NAME21 == "Melbourne - West")
GMelb_Shapes$SA2 |> filter(SA3_NAME21 == "Maribyrnong")
GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811")
GMelb_Shapes$SA1 |> filter(SA2_NAME21 == "Footscray")
GMelb_Shapes$MB |> filter(SA1_CODE21 == "21303134811")
ggplot() +
geom_sf(data = GMelb_Shapes$SA4,
aes(fill = SA4_CODE21),
alpha = 0.5,
linewidth = NA,
show.legend = FALSE) +
geom_sf(data = GMelb_Shapes$SA4 |> filter(SA4_NAME21 == "Melbourne - West"),
fill = NA,
color = "red",
alpha = 0.5,
linewidth = 1)+
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA4_NAME21 == "Melbourne - West"),
fill = NA,
linewidth = 0.1) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"),
fill = NA,
color = "red",
alpha = 0.5,
linewidth = 1) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA3_NAME21 == "Maribyrnong"),
fill = NA,
linewidth = 0.1) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"),
fill = NA,
color = "red",
linewidth = 1) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA3_NAME21 == "Maribyrnong"),
fill = NA,
linewidth = 0.1) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"),
fill = NA,
color = "red",
linewidth = 1)+
geom_sf(data = GMelb_Shapes$SA1 |> filter(SA2_NAME21 == "Footscray"),
fill = NA,
linewidth = 0.001) +
geom_sf(data = GMelb_Shapes$MB |> filter(SA1_CODE21 == "21303134811"),
fill = NA,
linewidth = 0.001) +
coord_sf(xlim = c(144.8, 144.96) , ylim = c(-37.75, -37.88))
library(tidyverse)
SA2_files <- list.files("../../../data/sims/SA2", full.names = TRUE)
SA2_tot_files <- SA2_files[!str_detect(SA2_files, "patchinf|patchsus|summary")]
SA2_sims <- read_csv(SA2_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
SA2_files <- list.files("../../../data/sims/SA2", full.names = TRUE, recursive = TRUE)
SA2_tot_files <- SA2_files[!str_detect(SA2_files, "patchinf|patchsus|summary")]
SA2_sims <- read_csv(SA2_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
SA2_sims <- read_csv(SA2_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
SA2_sims <- SA2_sims |>
mutate(
beta = as.numeric(str_extract(sim, "(...)_.{3}_.{3}_.{1,3}.csv", group = 1)),
gamma = as.numeric(str_extract(sim, "(...)_.{3}_.{1,3}.csv", group = 1)),
mu = as.numeric(str_extract(sim, "(...)_.{1,3}.csv", group = 1)),
R0 = beta/gamma,
SA = 2)
SA2_sims
View(SA2_sims)
