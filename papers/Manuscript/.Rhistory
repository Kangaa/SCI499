summarise(fin = min(S)) |>
ggplot() +
aes(x = mm, y = fin, col = mm) +
geom_point() +
facet_grid(SA ~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims,
Moss_sims
) |>
filter(R0 <= 2, R0 > 1) |>
group_by(sim, SA, R0, mm) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = mm, y = fin, col = SA) +
geom_point() +
facet_grid(~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 <= 2, R0 > 1) |>
group_by(sim, SA, R0, mm) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = mm, y = fin, col = SA) +
geom_point() +
facet_grid(~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 <= 2, R0 > 1) |>
ggplot() +
aes(x = t, y = I, col = mm, group = sim) +
geom_line() +
facet_grid(SA ~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 <= 2, R0 > 1) |>
group_by(sim, SA, R0, mm) |>
summarise(duration = max(t)) |>
ggplot() +
aes(x = mm, y = duration, col = SA) +
geom_point() +
facet_grid(~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 <= 2, R0 > 1) |>
group_by(sim, SA, R0, mm) |>
summarise(duration = max(t)) |>
ggplot() +
aes(x = mm, y = duration, col = SA) +
geom_boxplot() +
facet_grid(~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 <= 2, R0 > 1) |>
group_by(sim, SA, R0, mm) |>
summarise(duration = max(t)) |>
ggplot() +
aes(x = factor(mm), y = duration, col = SA) +
geom_boxplot() +
facet_grid(~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 <= 2, R0 > 1) |>
group_by(sim, SA, R0, mm) |>
summarise(duration = max(t)) |>
ggplot() +
aes(x = mm, y = duration, col = factor(SA)) +
geom_boxplot() +
facet_grid(~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 <= 2, R0 > 1) |>
group_by(sim, SA, R0, mm) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = mm, y = fin, col = SA) +
geom_point() +
facet_grid(~ R0, scales = "free")
library(tidyverse)
SA2_files <- list.files("C:/Users/reubender/Downloads/SA2_julia", full.names = TRUE)
SA2_tot_files <- SA2_files[!str_detect(SA2_files, "patchinf|patchsus|summary")]
SA2_sims <- read_csv(SA2_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
SA2_sims <- SA2_sims |>
mutate(
beta = as.numeric(str_extract(sim, "(...)_.{3}_.{3}_.{1,3}.csv", group = 1)),
gamma = as.numeric(str_extract(sim, "(...)_.{3}_.{1,3}.csv", group = 1)),
mm = as.numeric(str_extract(sim, "(...)_.{1,3}.csv", group = 1)),
R0 = beta/gamma,
SA = 2)
SA2_sims |>
filter(R0 <= 2, R0 > 1) |>
ggplot() +
aes(x = t, y = I, col = mm, group = sim) +
geom_line() +
facet_wrap(~R0, scales = "free")
SA3_files <- list.files("C:/Users/reubender/Downloads/SA3", full.names = TRUE)
SA3_tot_files <- SA3_files[!str_detect(SA3_files, "patchinf|patchsus|summary")]
SA3_sims <- read_csv(SA3_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
SA3_sims <- SA3_sims |>
mutate(
beta = as.numeric(str_extract(sim, "(...)_.{3}_.{3}_.{1,3}.csv", group = 1)),
gamma = as.numeric(str_extract(sim, "(...)_.{3}_.{1,3}.csv", group = 1)),
mm = as.numeric(str_extract(sim, "(...)_.{1,3}.csv", group = 1)),
R0 = beta/gamma,
SA = 3)
SA3_sims |>
ggplot() +
aes(x = t, y = I, col = mm, group = sim) +
geom_line() +
facet_wrap(~R0, scales = "free")
Moss_files <- list.files("C:/Users/reubender/Downloads/Moss", full.names = TRUE)
Moss_tot_files <- Moss_files[!str_detect(Moss_files, "patchinf|patchsus|summary")]
Moss_sims <- read_csv(Moss_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
Moss_sims <- Moss_sims |>
mutate(
beta = as.numeric(str_extract(sim, "(...)_.{3}_Moss_.{1,3}.csv", group = 1)),
gamma = as.numeric(str_extract(sim, "(...)_Moss_.{1,3}.csv", group = 1)),
R0 = beta/gamma,
SA = 3,
mm = "Moss")
Moss_sims |>
ggplot() +
aes(x = t, y = I, col = mm, group = sim) +
geom_line() +
facet_wrap(~R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 <= 2, R0 > 1) |>
ggplot() +
aes(x = t, y = I, col = mm, group = sim) +
geom_line() +
facet_grid(SA ~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 <= 2, R0 > 1) |>
group_by(sim, SA, R0, mm) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = mm, y = fin, col = SA) +
geom_point() +
facet_grid(~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims
) |>
filter(R0 > 1) |>
group_by(sim, SA, R0, mm) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = mm, y = fin, col = SA) +
geom_point() +
facet_grid(~ R0, scales = "free")
gg_save("GMelb_SA2")
library(tidyverse)
library(sf)
SA2_shapefile <- read_sf("../../data/ASGS_GDA2020/SA2_2021_AUST_SHP_GDA2020/SA2_2021_AUST_GDA2020.shp")
SA3_shapefile <- read_sf("../../data/ASGS_GDA2020/SA3_2021_AUST_SHP_GDA2020/SA3_2021_AUST_GDA2020.shp")
melb_shp_SA2 <- SA2_shapefile |>
filter(GCC_CODE21 == "2GMEL")
melb_shp_SA3 <- SA3_shapefile |>
filter(GCC_CODE21 == "2GMEL")
ggplot() +
geom_sf(data = melb_shp_SA3, aes(fill = SA4_NAME21), linewidth = 0.7)+
geom_sf(data = melb_shp_SA2, fill = NA)
gg_save("GMelb_SA2")
ggplot() +
#  geom_sf(data = melb_shp_SA3, aes(fill = SA4_NAME21), linewidth = 0.7)+
geom_sf(data = melb_shp_SA2, fill = NA)
plot(melb_shp_SA2)
melb_shp_SA3 |>
group_by()
melb_shp_SA3 |>
aggregate( by = "SA4_CODE21")
melb_shp_SA3 |>
aggregate( by = "SA4_CODE21", mean)
melb_shp_SA3 |>
aggregate( by = list("SA4_CODE21"), mean)
melb_shp_SA3 |>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry))
melb_shp_SA3 |>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)) |>
plot()
melb_shp_SA2|>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)) |>
ggplot()
melb_shp_SA2|>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)) |>
ggplot() +
geom_sf(data = .)
melb_shp_SA2|>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)) |>
ggplot() +
geom_sf(data = x)
ggplot() +
geom_sf(data = melb_shp_SA2|>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)))
melb_shp_SA2
install.packages("osmdata")
library(osmdata)
melb_shp_SA2
sf::st_bbox(melb_shp_SA2)
melb_bb <- sf::st_bbox(melb_shp_SA2)
opq(melb_bb)
melb_osm <- opq(melb_bb)
melb_water <- melb_osm |>
add_osm_feature(key = "natural",
value = c("water")) |>
osmdata_sf()
+ geom_sf(data = melb_water$osm_multipolygons, fill = "light blue") +
theme_minimal()
ggplot()  +
geom_sf(data = melb_water$osm_multipolygons, fill = "light blue") +
theme_minimal()
melb_osm <- opq("Melbourne") |>
melb_osm |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary")) |>
osmdata_sf()
melb_osm <- opq("Melbourne") |>
melb_osm() |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary")) |>
osmdata_sf()
melb_osm <- opq("Melbourne") |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary")) |>
osmdata_sf()
ggplot()  +
geom_sf(data = melb_osm$osm_multipolygons) +
theme_minimal()
ggplot()  +
geom_sf(data = melb_osm$osm_multipolygons, col = "black") +
theme_minimal()
melb_osm <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary")) |>
osmdata_sf()
ggplot()  +
geom_sf(data = melb_osm$osm_multipolygons) +
theme_minimal()
ggplot()  +
geom_sf(data = melb_osm$osm_polygons) +
theme_minimal()
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
theme_minimal()
osmdata::available_features()
osmdata::available_tags(feature = "water")
osmdata::available_tags(feature = "natural")
osmdata_sf()
melb_osm <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary", "tertiary")) |>
add_osm_feature(key = "natural",
value = c("coastline", "bay")) |>
osmdata_sf()
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
theme_minimal()
ggplot()  +
geom_sf(data = melb_osm$osm_polygons) +
theme_minimal()
melb_bb <- sf::st_bbox(melb_shp_SA2)
melb_osm <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary", "tertiary")) |>
add_osm_feature(key = "natural",
value = c("coastline", "bay")) |>
osmdata_sf()
ggplot()  +
geom_sf(data = melb_osm$osm_polygons) +
theme_minimal()
ggplot()  +
geom_sf(data = melb_osm$osm_polygons, col = "black") +
theme_minimal()
library(tidyverse)
library(sf)
SA2_shapefile <- read_sf("data/ASGS_GDA2020/SA2_2021_AUST_SHP_GDA2020/SA2_2021_AUST_GDA2020.shp")
melb_shp_SA2 <- SA2_shapefile |>
filter(GCC_CODE21 == "2GMEL")
ggplot() +
geom_sf(data = melb_shp_SA2|>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)))
library(osmdata)
melb_bb <- sf::st_bbox(melb_shp_SA2)
melb_osm <- opq(melb_bb) |>
add_osm_features(key = "highway",
value = c("motorway", "primary", "secondary", "tertiary")) |>
add_osm_feature(key = "natural",
value = c("coastline", "bay")) |>
osmdata_sf()
melb_osm <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary", "tertiary")) |>
add_osm_feature(key = "natural",
value = c("coastline", "bay")) |>
osmdata_sf()
ggplot()  +
geom_sf(data = melb_osm$osm_polygons) +
theme_minimal()
melb_osm <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary", "tertiary"))
osmdata_sf()
melb_osm <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary", "tertiary")) |>
osmdata_sf()
ggplot()  +
geom_sf(data = melb_osm$osm_polygons) +
theme_minimal()
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
theme_minimal()
aes(fill = SA4_CODE21, alpha = 0.2)+
geom_sf(data = data = melb_shp_SA2|>
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
geom_sf(data = data = melb_shp_SA2|>
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
geom_sf(data = melb_shp_SA2|>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)),
aes(fill = SA4_CODE21, alpha = 0.2))+
theme_minimal()
melb_osm <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("motorway", "primary", "secondary", "tertiary")) |>
add_osm_feature(key = "natural",
value = c("coastline", "bay")) |>
osmdata_sf()
View(melb_osm)
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
geom_sf(data = melb_shp_SA2|>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)),
aes(fill = SA4_CODE21, alpha = 0.2))+
theme_minimal()
View(melb_osm)
melb_osm <- opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("coastline", "bay")) |>
osmdata_sf()
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
geom_sf(data = melb_shp_SA2|>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)),
aes(fill = SA4_CODE21, alpha = 0.2))+
theme_minimal()
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
theme_minimal()
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
geom_sf(date = melb_osm$osm_polygons, aes(col  = "blue"))
ggplot()  +
geom_sf(data = melb_osm$osm_lines) +
geom_sf(data = melb_osm$osm_polygons, aes(col  = "blue"))
ggplot()  +
geom_sf(data = opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("coastline")) |>
osmdata_sf() |>
pluck("osm_lines")) +
theme_minimal()
ggplot()  +
geom_sf(data = opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("coastline")) |>
osmdata_sf() |>
pluck("osm_lines")) +
geom_sf(data = opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("bay")) |>
osmdata_sf() |>
pluck("osm_polygons"),
col = "lightblue") +
theme_minimal()
ggplot()  +
geom_sf(data = opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("coastline")) |>
osmdata_sf() |>
pluck("osm_lines")) +
geom_sf(data = opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("bay")) |>
osmdata_sf() |>
pluck("osm_polygons"),
fill = "lightblue") +
theme_minimal()
ggplot()  +
geom_sf(data = opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("coastline")) |>
osmdata_sf() |>
pluck("osm_lines")) +
geom_sf(data = opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("water")) |>
osmdata_sf() |>
pluck("osm_polygons"),
fill = "lightblue") +
theme_minimal()
ggplot()  +
geom_sf(data = opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("coastline")) |>
osmdata_sf() |>
pluck("osm_lines")) +
geom_sf(data = opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("bay")) |>
osmdata_sf() |>
pluck("osm_multipolygons"),
fill = "lightblue") +
theme_minimal()
melb_osm_coast <- opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("coastline")) |>
osmdata_sf()
melb_osm_coast <- opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("coastline")) |>
osmdata_sf()
melb_osm_bay <- opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("bay")) |>
osmdata_sf()
ggplot()  +
geom_sf(data =  melb_osm_coast) +
geom_sf(data = melb_osm_bay,
fill = "lightblue") +
theme_minimal()
ggplot()  +
geom_sf(data =  melb_osm_coast$osm_lines) +
geom_sf(data = melb_osm_bay$osm_multipolygons,
fill = "lightblue") +
theme_minimal()
melb_osm_roads <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("primary", "secondary", "tertiary")) |>
osmdata_sf()
melb_osm_roads <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("primary", "secondary", "tertiary")) |>
osmdata_sf()
ggplot()  +
geom_sf(data =  melb_osm_coast$osm_lines) +
geom_sf(data = melb_osm_bay$osm_multipolygons,
fill = "lightblue") +
theme_minimal()
```
ggplot()  +
geom_sf(data =  melb_osm_coast$osm_lines) +
geom_sf(data = melb_osm_bay$osm_multipolygons,
fill = "lightblue") +
geom_sf(data =  melb_osm_roads$osm_lines) +
theme_minimal()
install.packages("openstreetmap")
install.packages("OpenStreetMap")
library(OpenStreetMap)
library(tidyverse)
library(sf)
SA2_shapefile <- read_sf("data/ASGS_GDA2020/SA2_2021_AUST_SHP_GDA2020/SA2_2021_AUST_GDA2020.shp")
melb_shp_SA2 <- SA2_shapefile |>
filter(GCC_CODE21 == "2GMEL")
ggplot() +
geom_sf(data = melb_shp_SA2|>
group_by(SA4_CODE21) |>
summarise(geom = st_union(geometry)))
library(osmdata)
melb_bb <- sf::st_bbox(melb_shp_SA2)
melb_osm_coast <- opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("coastline")) |>
osmdata_sf()
melb_osm_bay <- opq(melb_bb) |>
add_osm_feature(key = "natural",
value = c("bay")) |>
osmdata_sf()
melb_osm_roads <- opq(melb_bb) |>
add_osm_feature(key = "highway",
value = c("primary", "secondary", "tertiary")) |>
osmdata_sf()
ggplot()  +
geom_sf(data =  melb_osm_coast$osm_lines) +
geom_sf(data = melb_osm_bay$osm_multipolygons,
fill = "lightblue") +
geom_sf(data =  melb_osm_roads$osm_lines) +
theme_minimal()
library(OpenStreetMap)
install.packages("rJava")
library(OpenStreetMap)
library(OpenStreetMap)
