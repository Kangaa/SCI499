View(config)
?renv
renv::repair()
renv::update
renv::update()
renv::lockfile_create()
renv::lockfile_create()
lock <- lockfile_create()
View(lock)
lockfile_write(lock)
lockfile_write(lock, "../..")
lockfile_write(lock, "..")
lockfile_write(lock, ".")
lockfile_write(lock, "/../..")
lockfile_write(lock, "test")
lockfile_write(lock, "../../test.lock")
lockfile_write(lock, "../../renv.lock")
library(tidyverse)
SA2_files <- list.files("../../data/sims/SA2", full.names = TRUE)
SA2_tot_files <- SA2_files[!str_detect(SA2_files, "patchinf|patchsus|summary")]
SA2_sims <- read_csv(SA2_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
SA2_sims <- SA2_sims |>
mutate(
beta = as.numeric(str_extract(sim, "(...)_.{3}_.{3}_.{1,3}.csv", group = 1)),
gamma = as.numeric(str_extract(sim, "(...)_.{3}_.{1,3}.csv", group = 1)),
mu = as.numeric(str_extract(sim, "(...)_.{1,3}.csv", group = 1)),
R0 = beta/gamma,
SA = 2)
SA2_files <- list.files("../../data/sims/SA2", full.names = TRUE)
SA2_files <- list.files("../data/sims/SA2", full.names = TRUE)
SA2_files <- list.files("data/sims/SA2", full.names = TRUE)
list.files("data/sims/SA2", full.names = TRUE)
pwd()
pwd
SA2_files <- list.files("../../", full.names = TRUE)
SA2_files <- list.files("../../data", full.names = TRUE)
SA2_files <- list.files("../..", full.names = TRUE)
SA2_files <- list.files("../../../", full.names = TRUE)
SA2_tot_files <- SA2_files[!str_detect(SA2_files, "patchinf|patchsus|summary")]
SA2_files <- list.files("../../../data/sims/SA2", full.names = TRUE)
SA2_tot_files <- SA2_files[!str_detect(SA2_files, "patchinf|patchsus|summary")]
SA2_sims <- read_csv(SA2_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
library(tidyverse)
SA2_files <- list.files("../../../data/sims/SA2", full.names = TRUE)
SA2_tot_files <- SA2_files[!str_detect(SA2_files, "patchinf|patchsus|summary")]
SA2_sims <- read_csv(SA2_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
SA2_sims <- SA2_sims |>
mutate(
beta = as.numeric(str_extract(sim, "(...)_.{3}_.{3}_.{1,3}.csv", group = 1)),
gamma = as.numeric(str_extract(sim, "(...)_.{3}_.{1,3}.csv", group = 1)),
mu = as.numeric(str_extract(sim, "(...)_.{1,3}.csv", group = 1)),
R0 = beta/gamma,
SA = 2)
SA2_sims |>
filter(R0 == 1.2 | R0 == 1.6 | R0 == 2) |>
ggplot() +
aes(x = t, y = I, col = factor(mu), group = sim) +
geom_line() +
facet_grid(R0~mu, scales = "free", labeller = label_both) +
xlab("time(days)") +
ylab("n infected individuals") +
theme_bw(base_size = 14) +
theme(legend.position = "none") +
scale_x_continuous(breaks = c(0, 50, 100))
SA3_files <- list.files("../../../data/sims/SA3", full.names = TRUE)
SA3_tot_files <- SA3_files[!str_detect(SA3_files, "patchinf|patchsus|summary")]
SA3_sims <- read_csv(SA3_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
SA3_sims <- SA3_sims |>
mutate(
beta = as.numeric(str_extract(sim, "(...)_.{3}_.{3}_.{1,3}.csv", group = 1)),
gamma = as.numeric(str_extract(sim, "(...)_.{3}_.{1,3}.csv", group = 1)),
mu = as.numeric(str_extract(sim, "(...)_.{1,3}.csv", group = 1)),
R0 = beta/gamma,
SA = 3)
SA3_sims |>
ggplot() +
aes(x = t, y = I, col = mu, group = sim) +
geom_line() +
facet_wrap(~R0, scales = "free")
SA4_files <- list.files("../../../data/sims/SA4", full.names = TRUE)
SA4_tot_files <- SA4_files[!str_detect(SA4_files, "patchinf|patchsus|summary")]
SA4_sims <- read_csv(SA4_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
SA4_sims <- SA4_sims |>
mutate(
beta = as.numeric(str_extract(sim, "(...)_.{3}_.{3}_.{1,3}.csv", group = 1)),
gamma = as.numeric(str_extract(sim, "(...)_.{3}_.{1,3}.csv", group = 1)),
mu = as.numeric(str_extract(sim, "(...)_.{1,3}.csv", group = 1)),
R0 = beta/gamma,
SA = 4)
SA4_sims |>
ggplot() +
aes(x = t, y = I, col = mu, group = sim) +
geom_line() +
facet_wrap(~R0, scales = "free")
Moss_files <- list.files("../../../data/sims/Moss", full.names = TRUE)
Moss_tot_files <- Moss_files[!str_detect(Moss_files, "patchinf|patchsus|summary")]
Moss_sims <- read_csv(Moss_tot_files, col_names = c("t", "S", "I"), skip = 2, id = "sim")
Moss_sims <- Moss_sims |>
mutate(
beta = as.numeric(str_extract(sim, "(...)_.{3}_Moss_.{1,3}.csv", group = 1)),
gamma = as.numeric(str_extract(sim, "(...)_Moss_.{1,3}.csv", group = 1)),
R0 = beta/gamma,
SA = 3,
mu = "Moss")
Moss_sims |>
ggplot() +
aes(x = t, y = I, col = mm, group = sim) +
geom_line() +
facet_wrap(~R0, scales = "free")
rbind(SA2_sims,
SA3_sims,
SA4_sims
) |>
filter(R0 <= 2) |>
ggplot() +
aes(x = t, y = I, col = mu, group = sim) +
geom_line() +
facet_grid(SA ~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims,
SA4_sims,
Moss_sims
) |>
group_by(sim, SA, R0, mu) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = SA, y = fin, col = mu) +
geom_point(size = 0.5) +
facet_grid(mu ~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims,
SA4_sims,
Moss_sims
) |>
group_by(sim, SA, R0, mu) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = mu, y = fin, col = SA) +
geom_point(size = 0.5) +
facet_grid(mu ~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims,
SA4_sims,
Moss_sims
) |>
group_by(sim, SA, R0, mu) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = mu, y = fin, col = SA) +
geom_point(size = 0.5) +
facet_grid( ~ R0, scales = "free")
rbind(SA2_sims,
SA3_sims,
SA4_sims,
Moss_sims
) |>
group_by(sim, SA, R0, mu) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = mu, y = fin, col = factor(SA)) +
geom_point(size = 0.5) +
facet_grid( ~ R0, scales = "free")
rbind(SA2_sims,
SA4_sims,
Moss_sims
) |>
group_by(sim, SA, R0, mu) |>
summarise(fin = min(S)) |>
ggplot() +
aes(x = mu, y = fin, col = factor(SA)) +
geom_point(size = 0.5) +
facet_grid( ~ R0, scales = "free")
library(tidyverse)
read_csv("../../data/Gmelb_UR-POW_SA3.csv")
read_csv("../../../data/Gmelb_UR-POW_SA3.csv")
list.dirs("../../")
list.dirs("../../data")
list.files("../../data")
read_csv("../../data/GMelb_UR-POW_2016.csv")
SA3_MM <- read_csv("../../data/GMelb_UR-POW_2016.csv")
SA3_pop <- read_csv("../../data/GMelbSA3Pop21.csv")
SA3_pop
colnames(SA3_MM)
colnames(SA3_MM) == SA3[1]
colnames(SA3_MM) == SA3_MM[1]
SA3_MM[1]
colnames(SA3_MM)
colnames(SA3_MM)[-1] == SA3_MM[1]
match(SA3_pop$SA3_Name, SA3_MM[1])
SA3_pop$SA3_Name
SA3_MM[1]
match(SA3_pop$SA3_Name, SA3_MM[[1]])
SA3_pop$Code <- match(SA3_pop$SA3_Name, SA3_MM[[1]])
SA3_pop <- read_csv("../../data/GMelbSA3Pop21.csv")
SA3_pop$Code[match(SA3_pop$SA3_Name, SA3_MM[[1]])]
SA3_pop$code[match(SA3_pop$SA3_Name, SA3_MM[[1]])]
SA3_pop$code
SA3_pop
SA3_MM %>%
select(-1) %>%
`colnames<-`(SA3_pop$SA3_Code[match(SA3_pop$SA3_Name, SA3_MM[[1]])])
SA3_pop$SA3_Code[match(SA3_pop$SA3_Name, SA3_MM[[1]])]
SA3_MM %>%
select(-1) %>%
`colnames<-`(as.character(SA3_pop$SA3_Code[match(SA3_pop$SA3_Name, SA3_MM[[1]])]))
SA3_MM <- SA3_MM %>%
select(-1) %>%
`colnames<-`(as.character(SA3_pop$SA3_Code[match(SA3_pop$SA3_Name, SA3_MM[[1]])]))
#| label: fig-MelbSAexaple
library(sf)
library(tidyverse)
Shapes <- list()
Shapes["SA1"] <- read_sf("../../data/ASGS_GDA2020/SA1_2021_AUST_SHP_GDA2020/SA1_2021_AUST_GDA2020.shp")
Shapes
Shapes[1] <- read_sf("../../data/ASGS_GDA2020/SA1_2021_AUST_SHP_GDA2020/SA1_2021_AUST_GDA2020.shp")
Shapes
View(Shapes)
Shapes <- list(SA1 = tibble())
Shapes$SA1 <- read_sf("../../data/ASGS_GDA2020/SA1_2021_AUST_SHP_GDA2020/SA1_2021_AUST_GDA2020.shp")
View(Shapes)
Shapes <- list(SA1 = tibble(),
SA2 = tibble(),
SA3 = tibble(),
SA4 = tibble())
Shapes$SA2 <- read_sf("../../data/ASGS_GDA2020/SA2_2021_AUST_SHP_GDA2020/SA2_2021_AUST_GDA2020.shp")
Shapes$SA3 <- read_sf("../../data/ASGS_GDA2020/SA3_2021_AUST_SHP_GDA2020/SA3_2021_AUST_GDA2020.shp")
Shapes$SA4 <- read_sf("../../data/ASGS_GDA2020/SA4_2021_AUST_SHP_GDA2020/SA4_2021_AUST_GDA2020.shp")
new <- Shapes |>
map(filter, GCC_NAME21 == "Greater Melbourne")
new <- Shapes |>
map(filter, .$GCC_NAME21 == "Greater Melbourne")
new <- Shapes |>
map(filter, function(x) x$GCC_NAME21 == "Greater Melbourne")
new <- Shapes |>
map(\(x) filter(x$GCC_NAME21 == "Greater Melbourne"))
new <- Shapes |>
map(\(x) filter(GCC_NAME21 == "Greater Melbourne"))
new <- Shapes |>
map(\(x) filter(x, GCC_NAME21 == "Greater Melbourne"))
Shapes$SA4
Shapes$SA3
new <- Shapes |>
map(\(x) filter(x, GCC_NAME21 == "Greater Melbourne"))
Shapes$SA1
Shapes$SA1 <- read_sf("../../data/ASGS_GDA2020/SA1_2021_AUST_SHP_GDA2020/SA1_2021_AUST_GDA2020.shp")
Shapes$SA1 <- read_sf("../../data/ASGS_GDA2020/SA1_2021_AUST_SHP_GDA2020/SA1_2021_AUST_GDA2020.shp")
Shapes$SA2 <- read_sf("../../data/ASGS_GDA2020/SA2_2021_AUST_SHP_GDA2020/SA2_2021_AUST_GDA2020.shp")
Shapes$SA3 <- read_sf("../../data/ASGS_GDA2020/SA3_2021_AUST_SHP_GDA2020/SA3_2021_AUST_GDA2020.shp")
Shapes$SA4 <- read_sf("../../data/ASGS_GDA2020/SA4_2021_AUST_SHP_GDA2020/SA4_2021_AUST_GDA2020.shp")
new <- Shapes |>
map(\(x) filter(x, GCC_NAME21 == "Greater Melbourne"))
GMelb_Shapes <- Shapes |>
map(\(x) filter(x, GCC_NAME21 == "Greater Melbourne"))
GMelb_Shapes
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_Code))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE))
GMelb_Shapes$SA4
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), lty = NULL)
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21, lty = NULL) )
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21, linewidth = NULL) )
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21, linewidth = 0) )
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = 0)
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA)
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_cartesian(xlim = 144.7)
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_cartesian(xlim = c(144.7, 145.2))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_sf(xlim = c(144.7, 145.2))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_sf(xlim = c(145, 145.2))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_sf(xlim = c(144.8, 145.2))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_sf(xlim = c(144.8, 145.2), ylim = c(37.7, 38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_sf(xlim = c(144.8, 145.2))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_sf(xlim = c(144.8, 145.2), ylim = , ylim = c(37.7, 38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_sf(xlim = c(144.8, 145.2) , ylim = c(37.7, 38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_sf(xlim = c(144.8, 145.2) , ylim = c(38, 38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), linewidth = NA) +
coord_sf(xlim = c(144.8, 145.2) , ylim = c(-37.7, -38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
coord_sf(xlim = c(144.8, 145.2) , ylim = c(-37.7, -38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong" | SA3_NAME21 == "Essendon"))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong" | SA3_NAME21 == "Essendon")) +
coord_sf(xlim = c(144.8, 145.2) , ylim = c(-37.7, -38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong" | SA3_NAME21 == "Essendon"), fill = NULL) +
coord_sf(xlim = c(144.8, 145.2) , ylim = c(-37.7, -38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong" | SA3_NAME21 == "Essendon"), aes(fill = NULL)) +
coord_sf(xlim = c(144.8, 145.2) , ylim = c(-37.7, -38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong" | SA3_NAME21 == "Essendon"), fill = NA) +
coord_sf(xlim = c(144.8, 145.2) , ylim = c(-37.7, -38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong" | SA3_NAME21 == "Essendon"), fill = NA) +
coord_sf(xlim = c(144.8, 144.95) , ylim = c(-37.7, -38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong" | SA3_NAME21 == "Essendon"), fill = NA) +
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.7, -38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray")) +
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.7, -38))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray")) +
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray")) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"))+
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"), fill = NA)+
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
GMelb_SA4_colors <- ggplot_build(ggplot() |> geom_sf(data = Shapes$SA4, aes(fill = SA4_CODE21)))
GMelb_SA4_colors <- ggplot_build(ggplot() + geom_sf(data = Shapes$SA4, aes(fill = SA4_CODE21)))
ggplot_build(ggplot() + geom_sf(data = Shapes$SA4, aes(fill = SA4_CODE21)))
ggplot_build(ggplot() + geom_sf(data = Gmelb_Shapes$SA4, aes(fill = SA4_CODE21)))
ggplot_build(ggplot() + geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21)))
GMelb_SA4_colors <- ggplot_build(ggplot() + geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21)))
GMelb_SA4_plot <- ggplot() + geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21))
Gmelb_SA4_colors <- ggplot_build(GMelb_SA4_plot)
GMelb_SA4_plot <- ggplot() + geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21))
Gmelb_SA4_colors <- ggplot_build(GMelb_SA4_plot)
Gmelb_SA4_colors <- ggplot_build(GMelb_SA4_plot) |>
pluck("data", "fill")
Gmelb_SA4_colors
Gmelb_SA4_colors <- ggplot_build(GMelb_SA4_plot)
Gmelb_SA4_colors <- ggplot_build(GMelb_SA4_plot) |>
pluck("data",1, "fill")
Gmelb_SA4_colors
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = GMelb_SA4_colors[4]) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"), fill = NA)+
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
Gmelb_SA4_colors <- ggplot_build(GMelb_SA4_plot) |>
pluck("data",1, "fill")
GMelb_SA4_colors[3]
ggplot_build(GMelb_SA4_plot) |>
pluck("data",1, "fill")
Gmelb_SA4_colors <- ggplot_build(GMelb_SA4_plot) |>
pluck("data",1, "fill")
library(sf)
library(tidyverse)
Shapes <- list(SA1 = tibble(),
SA2 = tibble(),
SA3 = tibble(),
SA4 = tibble())
Shapes$SA1 <- read_sf("../../data/ASGS_GDA2020/SA1_2021_AUST_SHP_GDA2020/SA1_2021_AUST_GDA2020.shp")
Shapes$SA2 <- read_sf("../../data/ASGS_GDA2020/SA2_2021_AUST_SHP_GDA2020/SA2_2021_AUST_GDA2020.shp")
Shapes$SA3 <- read_sf("../../data/ASGS_GDA2020/SA3_2021_AUST_SHP_GDA2020/SA3_2021_AUST_GDA2020.shp")
Shapes$SA4 <- read_sf("../../data/ASGS_GDA2020/SA4_2021_AUST_SHP_GDA2020/SA4_2021_AUST_GDA2020.shp")
GMelb_Shapes <- Shapes |>
map(\(x) filter(x, GCC_NAME21 == "Greater Melbourne"))
GMelb_SA4_plot <- ggplot() + geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21))
Gmelb_SA4_colors <- ggplot_build(GMelb_SA4_plot) |>
pluck("data",1, "fill")
Gmelb_SA4_colors <- ggplot_build(GMelb_SA4_plot) |>
pluck("data",1, "fill")
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = GMelb_SA4_colors[3]) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"), fill = NA)+
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
GMelb_SA4_colors <- ggplot_build(GMelb_SA4_plot) |>
pluck("data",1, "fill")
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = GMelb_SA4_colors[3]) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"), fill = NA)+
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.4, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = GMelb_SA4_colors[8]) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"), fill = NA) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"), fill = NA)+
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = 2) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = GMelb_SA4_colors[8]) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"), , fill = GMelb_SA4_colors[8]) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"), , fill = GMelb_SA4_colors[8])+
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = GMelb_SA4_colors[8], alpha = 0.5) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"), , fill = GMelb_SA4_colors[8], alpha = 0.5) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"), , fill = GMelb_SA4_colors[8], alpha = 0.5)+
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
```{r}
#| label: fig-MelbSAexaple
library(sf)
library(tidyverse)
Shapes <- list(SA1 = tibble(),
SA2 = tibble(),
SA3 = tibble(),
SA4 = tibble())
Shapes$SA1 <- read_sf("../../data/ASGS_GDA2020/SA1_2021_AUST_SHP_GDA2020/SA1_2021_AUST_GDA2020.shp")
Shapes$SA2 <- read_sf("../../data/ASGS_GDA2020/SA2_2021_AUST_SHP_GDA2020/SA2_2021_AUST_GDA2020.shp")
Shapes$SA3 <- read_sf("../../data/ASGS_GDA2020/SA3_2021_AUST_SHP_GDA2020/SA3_2021_AUST_GDA2020.shp")
Shapes$SA4 <- read_sf("../../data/ASGS_GDA2020/SA4_2021_AUST_SHP_GDA2020/SA4_2021_AUST_GDA2020.shp")
GMelb_Shapes <- Shapes |>
map(\(x) filter(x, GCC_NAME21 == "Greater Melbourne"))
GMelb_SA4_plot <- ggplot() + geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21))
GMelb_SA4_colors <- ggplot_build(GMelb_SA4_plot) |>
pluck("data",1, "fill")
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 |> filter(SA3_NAME21 == "Maribyrnong"), fill = GMelb_SA4_colors[8], alpha = 0.5) +
geom_sf(data = GMelb_Shapes$SA2 |> filter(SA2_NAME21 == "Footscray"), fill = GMelb_SA4_colors[8], alpha = 0.5) +
geom_sf(data = GMelb_Shapes$SA1 |>  filter(SA1_CODE21 == "21303134811"), fill = GMelb_SA4_colors[8], alpha = 0.5)+
coord_sf(xlim = c(144.8, 145) , ylim = c(-37.75, -37.9))
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 ) +
geom_sf(data = GMelb_Shapes$SA2 ) +
geom_sf(data = GMelb_Shapes$SA1)
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 ) +
geom_sf(data = GMelb_Shapes$SA2 ) +
geom_sf(data = GMelb_Shapes$SA1 )
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 ) +
geom_sf(data = GMelb_Shapes$SA2, lty = dotted)
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3 fill = NA) +
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3, fill = NA) +
geom_sf(data = GMelb_Shapes$SA2, lty = dotted, fill = NA)
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = NA) +
geom_sf(data = GMelb_Shapes$SA3, fill = NA) +
geom_sf(data = GMelb_Shapes$SA2, lty = "dotted", fill = NA)
#| label: fig-GmelbSA2SA3SA4
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = 1) +
geom_sf(data = GMelb_Shapes$SA3, fill = NA) +
geom_sf(data = GMelb_Shapes$SA2, lty = "dotted", fill = NA)
#| label: fig-GmelbSA2SA3SA4
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = 1) +
geom_sf(data = GMelb_Shapes$SA3, fill = NA, linewidth = 0.5) +
geom_sf(data = GMelb_Shapes$SA2, lty = "dotted", fill = NA, linewidth = 0.5)
#| label: fig-GmelbSA2SA3SA4
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = 1) +
geom_sf(data = GMelb_Shapes$SA3, fill = NA, linewidth = 0.5) +
geom_sf(data = GMelb_Shapes$SA2, lty = "dash", fill = NA, linewidth = 0.3)
#| label: fig-GmelbSA2SA3SA4
ggplot() +
geom_sf(data = GMelb_Shapes$SA4, aes(fill = SA4_CODE21), alpha = 0.5, linewidth = 1) +
geom_sf(data = GMelb_Shapes$SA3, fill = NA, linewidth = 0.5) +
geom_sf(data = GMelb_Shapes$SA2, lty = "dashed", fill = NA, linewidth = 0.3)
